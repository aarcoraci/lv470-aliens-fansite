import{r as He,o as U,c as G,a as q,S as We,F as $e,b as je,A as Ve,D as _e,B as fe,M as Y,d as J,T as ee,R as T,e as Qe,C as Ee,f as P,V as b,g as Ie,O as we,h as y,i as ve,G as qe,Q as be,E as R,j as Ye,k as Xe,l as Ze,m as Ke,n as Je,p as et,W as tt,q as st,s as Be,t as X,u as E,v as nt,w as r,x as at,y as it,z as Ne,H as De,I as Me,J as B,K as S,L as Le,N as te,P as ot,U as rt,X as Pe,Y as lt,Z as ct,_ as ut,$ as ht,a0 as dt,a1 as pt,a2 as mt,a3 as gt}from"./vendor.2cc5acb8.js";const _t=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const t of o)if(t.type==="childList")for(const s of t.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&a(s)}).observe(document,{childList:!0,subtree:!0});function n(o){const t={};return o.integrity&&(t.integrity=o.integrity),o.referrerpolicy&&(t.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?t.credentials="include":o.crossorigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function a(o){if(o.ep)return;o.ep=!0;const t=n(o);fetch(o.href,t)}};_t();var x=(i,e)=>{const n=i.__vccOpts||i;for(const[a,o]of e)n[a]=o;return n};const ft={};function Et(i,e){const n=He("router-view");return U(),G("main",null,[q(n)])}var It=x(ft,[["render",Et]]),se;(function(i){i[i.BLUEPRINT=0]="BLUEPRINT",i[i.REGULAR=1]="REGULAR"})(se||(se={}));var _=se;class wt{constructor(){this.scene=new We,this.sceneElements=[]}update(e){this.sceneElements.forEach(n=>{n.update&&n.update(e)})}dispose(){this.sceneElements.forEach(e=>{e.dispose()})}render(e,n){e.render(this.scene,n)}}class ye extends wt{update(e){this.sceneElements.forEach(n=>{n.update&&n.update(e)})}dispose(){super.dispose(),this.sceneElements.forEach(e=>{e.parts.forEach(n=>{this.scene.remove(n.mesh)}),e.parts=[]}),this.sceneElements=[]}assignElementsToScene(e){e.forEach(n=>{this.sceneElements.push(n),n.parts.forEach(a=>{this.scene.add(a.mesh)})})}addFog(){this.scene.fog=new $e(2893140,.0025,41)}buildLights(e,n,a){const o=new je(16120922);o.position.set(0,16,0),o.castShadow=!0,o.intensity=.25,o.shadow.mapSize.width=1024,o.shadow.mapSize.height=1024,this.scene.add(o);const t=new Ve(16444912);t.intensity=.25,this.scene.add(t);const s=new _e(16444912);s.position.set(4,3,2),s.castShadow=!0,s.intensity=.55,s.shadow.mapSize.width=1024,s.shadow.mapSize.height=1024,s.castShadow=!0,s.shadow.camera.left=-e,s.shadow.camera.right=e,s.shadow.camera.top=e,s.shadow.camera.bottom=-e,s.shadow.camera.near=n,s.shadow.camera.far=a,this.scene.add(s);const l=new _e(255);l.position.set(-4,3,2),l.castShadow=!1,l.intensity=.65,this.scene.add(l)}}var ne;(function(i){i[i.UNKNOWN=0]="UNKNOWN",i[i.BUILDING=1]="BUILDING",i[i.VEHICLE=2]="VEHICLE",i[i.TERRAIN=3]="TERRAIN",i[i.DOODAD=4]="DOODAD"})(ne||(ne={}));var v=ne;class N{constructor(e="",n=v.UNKNOWN){this.boundingBox=new fe,this.parts=[],this.name=e,this.sceneElementType=n}buildBoundingBox(){this.parts.forEach(e=>{this.boundingBox.expandByObject(e.mesh)})}dispose(){this.parts.forEach(e=>{e.mesh.geometry.dispose(),e.material instanceof Array?e.material.forEach(n=>n.dispose()):e.material.dispose()})}}class p{constructor(e){this.mesh=e,this.material=e.material,this.boundingBox=new fe().setFromObject(e)}}var ae;(function(i){i[i.WHITE=16777215]="WHITE",i[i.BLUE_1=18059]="BLUE_1",i[i.RED_1=16711680]="RED_1"})(ae||(ae={}));var d=ae;class c{static getRegularBuildingMaterial(e=!1){const n=new Y({color:d.BLUE_1});return e&&(n.side=J),n}static getRegularAccentRedMaterial(e=!1,n=d.RED_1){const a=new Y({color:n,emissive:n,emissiveIntensity:.3});return e&&(a.side=J),a}static getTexturedGroundMaterial(){const e=40,n=new ee().load("textures/ground_c.jpg");n.wrapS=T,n.wrapT=T,n.repeat.set(e,e);const a=new ee().load("textures/ground_n.jpg");a.wrapS=T,a.wrapT=T,a.repeat.set(e,e);const o=new ee().load("textures/ground_r.jpg");o.wrapS=T,o.wrapT=T,o.repeat.set(e,e);const t=new Qe;return t.envMap=n,t.envMapIntensity=.6,t.normalMap=a,t.roughnessMap=o,t.emissive=new Ee(d.BLUE_1),t.color=new Ee(d.BLUE_1),t.emissiveIntensity=.2,t}static getRegularGroundMAterial(){return new Y({color:d.BLUE_1})}static getBlueprintMaterial(e=d.BLUE_1,n=!1){const a=new Y({color:e,wireframe:!0});return n&&(a.side=J),a}static getAccentColor(e){return e==1?d.WHITE:d.RED_1}static assignBuildingMaterial(e,n=d.BLUE_1,a=!1,o=!1,t=!1,s=!1,l=!1){t?e.material=this.getBlueprintMaterial(n,l):s?e.material=this.getRegularAccentRedMaterial(l,n):e.material=this.getRegularBuildingMaterial(l),e.castShadow=a,e.receiveShadow=o}}const Ae=class extends N{constructor(i=[],e="",n){super(e,v.BUILDING);const a=n==_.BLUEPRINT;i.forEach(o=>{const t=o.clone();if(t.userData.node_name==Ae.BUILDING_NAME)this.position=o.position.clone(),c.assignBuildingMaterial(t,d.BLUE_1,!0,!0,a,!1,!1),this.parts.push(new p(t));else if(!a){const s=c.getAccentColor(t.userData.accent_type);c.assignBuildingMaterial(t,s,!1,!1,a,!0,!0),this.parts.push(new p(t))}}),this.buildBoundingBox()}};let O=Ae;O.BUILDING_NAME="atmosphere_processor";class ie extends N{constructor(e,n,a){super(n,v.TERRAIN);const o=a==_.BLUEPRINT;e.forEach(t=>{const s=t.clone();this.position=s.position,o?s.material=c.getBlueprintMaterial():(s.material=c.getTexturedGroundMaterial(),s.receiveShadow=!0),this.parts.push(new p(s))}),this.buildBoundingBox()}}ie.BUILDING_NAME="terrain";const Z=class extends N{constructor(i=[],e="",n){super(e,v.BUILDING);const a=n==_.BLUEPRINT;i.forEach(o=>{const t=o.clone();t.userData.node_name==Z.LIGHT_BUILDING_NAME?(c.assignBuildingMaterial(t,d.RED_1,!0,!1,a,!0,!1),this.light=t,this.light.rotation.z=Math.PI/3,this.light.rotation.y=Math.PI/2,this.parts.push(new p(t))):(t.userData.node_name==Z.BASE_BUILDING_NAME&&(this.position=t.position.clone(),c.assignBuildingMaterial(t,d.BLUE_1,!0,!0,a,!1,!1)),t.userData.node_name==Z.ANTENNA_BUILDING_NAME&&(c.assignBuildingMaterial(t,d.BLUE_1,!0,!1,a,!1,!0),this.antenna=t,this.antenna.rotation.z=Math.PI/3,this.antenna.rotation.y=Math.PI/2),this.parts.push(new p(t)))}),this.buildBoundingBox()}update(i){this.antenna.rotation.y+=Math.PI*.05*i,this.light.rotation.y+=Math.PI*.05*i}};let M=Z;M.BUILDING_NAME="comms_tower";M.BASE_BUILDING_NAME="comms_tower_base";M.ANTENNA_BUILDING_NAME="comms_tower_antenna";M.LIGHT_BUILDING_NAME="comms_tower_light";const Ue=class extends N{constructor(i=[],e="",n){super(e,v.BUILDING);const a=n==_.BLUEPRINT;i.forEach(o=>{const t=o.clone();if(t.userData.node_name==Ue.BUILDING_NAME)c.assignBuildingMaterial(t,d.BLUE_1,!0,!0,a,!1,!1),this.position=t.position.clone(),this.parts.push(new p(t));else if(t.userData.building_accent&&!a){const s=c.getAccentColor(t.userData.accent_type);c.assignBuildingMaterial(t,s,!1,!1,a,!0,!0),this.parts.push(new p(t))}else t.userData.building_base&&(c.assignBuildingMaterial(t,d.BLUE_1,!0,!0,a,!1,!1),this.parts.push(new p(t)))}),this.buildBoundingBox()}};let k=Ue;k.BUILDING_NAME="district";const Ce=class extends N{constructor(i=[],e="",n){super(e,v.BUILDING);const a=n==_.BLUEPRINT;i.forEach(o=>{const t=o.clone();if(t.userData.node_name==Ce.BUILDING_NAME)this.position=t.position.clone(),c.assignBuildingMaterial(t,d.BLUE_1,!0,!0,a,!1,!1),this.parts.push(new p(t));else{const s=c.getAccentColor(t.userData.accent_type);t.userData.building_accent&&!a?(c.assignBuildingMaterial(t,s,!1,!1,a,!0,!0),this.parts.push(new p(t))):t.userData.building_base&&(c.assignBuildingMaterial(t,d.BLUE_1,!0,!0,a,!1,!1),this.parts.push(new p(t)))}}),this.buildBoundingBox()}};let F=Ce;F.BUILDING_NAME="living_quarters";const Ge=class extends N{constructor(i=[],e="",n){super(e,v.BUILDING);const a=n==_.BLUEPRINT;i.forEach(o=>{const t=o.clone();if(t.userData.node_name==Ge.BUILDING_NAME)this.position=t.position.clone(),c.assignBuildingMaterial(t,d.BLUE_1,!0,!0,a,!1,!1),this.parts.push(new p(t));else if(t.userData.building_accent&&!a){const s=c.getAccentColor(t.userData.accent_type);c.assignBuildingMaterial(t,s,!1,!1,a,!0,!0),this.parts.push(new p(t))}else c.assignBuildingMaterial(t,d.BLUE_1,!0,!0,a,!1,!1),this.parts.push(new p(t))}),this.buildBoundingBox()}};let z=Ge;z.BUILDING_NAME="operations";const Te=class extends N{constructor(i=[],e="",n){super(e,v.DOODAD);const a=n==_.BLUEPRINT;i.forEach(o=>{const t=o.clone();if(t.userData.node_name.includes(Te.BUILDING_NAME))c.assignBuildingMaterial(t,d.BLUE_1,!0,!0,a,!1,!1),this.parts.push(new p(t));else{const l=c.getAccentColor(t.userData.accent_type);c.assignBuildingMaterial(t,l,!1,!1,a,!0,!0),this.parts.push(new p(t))}}),this.buildBoundingBox()}};let $=Te;$.BUILDING_NAME="connector";const H=class extends N{constructor(i,e="",n){super(e,v.BUILDING);const a=n==_.BLUEPRINT;i.forEach(h=>{const u=h.clone();if(u.userData.node_name==H.CRANE_BUILDING)c.assignBuildingMaterial(u,d.BLUE_1,!0,!0,a,!1,!1),this.parts.push(new p(u));else if(u.userData.node_name==H.ORE_PROCESSING)this.position=u.position.clone(),c.assignBuildingMaterial(u,d.BLUE_1,!0,!0,a,!1,!1),this.parts.push(new p(u));else if(u.userData.node_name==H.GRINDER_1)this.grinder1=u,c.assignBuildingMaterial(u,d.BLUE_1,!0,!1,a,!1,!1),this.parts.push(new p(u));else if(u.userData.node_name==H.GRINDER_2)this.grinder2=u,c.assignBuildingMaterial(u,d.BLUE_1,!0,!1,a,!1,!1),this.parts.push(new p(u));else if(h.userData.node_name==H.CRANE_GRIP)this.craneGrip=u,c.assignBuildingMaterial(u,d.BLUE_1,!0,!1,a,!1,!1),this.parts.push(new p(u));else{const L=c.getAccentColor(u.userData.accent_type);c.assignBuildingMaterial(u,L,!1,!1,a,!0,!0),this.parts.push(new p(u))}}),this.buildBoundingBox();const o=Math.PI*.011,t=8e3,s={r:-o*Math.PI},l={r:o*Math.PI},g={r:o*Math.PI},m={r:-o*Math.PI};this.gripTween1=new P(s).to(l,t).onUpdate(()=>{this.craneGrip.rotation.x=s.r}).onComplete(()=>{this.gripTween2.start()}),this.gripTween2=new P(g).to(m,t).onUpdate(()=>{this.craneGrip.rotation.x=g.r}).onComplete(()=>{this.gripTween1.start()}),this.gripTween1.start()}update(i){this.grinder1.rotation.y+=Math.PI*-.45*i,this.grinder2.rotation.y+=Math.PI*.45*i}};let I=H;I.BUILDING_NAME="ore_processing";I.CRANE_BUILDING="crane";I.CRANE_GRIP="crane_grip";I.ORE_PROCESSING="ore_processing";I.GRINDER_1="grinder_1";I.GRINDER_2="grinder_2";class vt{}const oe=class extends N{constructor(i=[],e="",n){super(e,v.BUILDING);this.fans=[];const a=n==_.BLUEPRINT;i.forEach(o=>{const t=o.clone();if(t.userData.node_name==oe.BUILDING_NAME)this.position=o.position.clone(),c.assignBuildingMaterial(t,d.BLUE_1,!0,!0,a,!1,!1),this.position=t.position.clone(),this.parts.push(new p(t));else if(t.userData.node_name&&t.userData.node_name==oe.FAN_SUFFIX){c.assignBuildingMaterial(t,d.BLUE_1,!0,!0,a,!1,!1),this.parts.push(new p(t));const s=new vt;s.mesh=t,s.rotationSpeed=Math.PI*3,this.fans.push(s)}else if(t.userData.building_accent&&!a){const s=c.getAccentColor(t.userData.accent_type);c.assignBuildingMaterial(t,s,!1,!1,a,!0,!0),this.parts.push(new p(t))}else c.assignBuildingMaterial(t,d.BLUE_1,!0,!0,a,!1,!1),this.parts.push(new p(t))}),this.buildBoundingBox()}update(i){this.fans.forEach(e=>{e.mesh.rotation.y+=e.rotationSpeed*i})}};let C=oe;C.BUILDING_NAME="workshop";C.FAN_SUFFIX="fan";const Re=class extends N{constructor(i=[],e="",n){super(e,v.VEHICLE);const a=n==_.BLUEPRINT;i.forEach(o=>{const t=o.clone();t.userData.node_name==Re.VEHICLE_NAME?(this.position=o.position.clone(),c.assignBuildingMaterial(t,d.BLUE_1,!0,!0,a,!1,!1),this.position=t.position.clone(),this.parts.push(new p(t))):(c.assignBuildingMaterial(t,d.BLUE_1,!0,!0,a,!1,!1),this.parts.push(new p(t)))}),this.buildBoundingBox()}};let re=Re;re.VEHICLE_NAME="rover";const Se=class extends N{constructor(i=[],e="",n){super(e,v.VEHICLE);const a=n==_.BLUEPRINT;i.forEach(o=>{const t=o.clone();t.userData.node_name==Se.VEHICLE_NAME&&(this.position=o.position.clone(),c.assignBuildingMaterial(t,d.BLUE_1,!0,!0,a,!1,!1),this.position=t.position.clone(),this.dropShipMesh=t,this.parts.push(new p(t)))}),this.buildBoundingBox()}update(i){this.dropShipMesh.rotation.y+=.017*Math.PI*i}};let le=Se;le.VEHICLE_NAME="dropship";class bt{construct(e,n){const a=[];return a.push(this.buildAtmosphereProcessor(e,n)),a.push(this.buildTerrain(e,n)),a.push(this.buildCommsTower(e,n)),a.push(this.buildDistrict(e,n)),a.push(this.buildLivingQuarters(e,n)),a.push(this.buildOperations(e,n)),a.push(this.buildConnectors(e,n)),a.push(this.buildOreProcessing(e,n)),a.push(this.buildWorkshop(e,n)),this.buildVehicles(e,n).forEach(t=>{a.push(t)}),a}buildOperations(e,n){const a=e.scene.children.find(s=>s.userData.node_name==z.BUILDING_NAME),o=e.scene.children.filter(s=>s.userData.parent_node&&s.userData.parent_node==z.BUILDING_NAME),t=[];return t.push(a),o.forEach(s=>{t.push(s)}),new z(t,z.BUILDING_NAME,n)}buildConnectors(e,n){const a=e.scene.children.filter(s=>s.userData.node_name&&s.userData.node_name.includes($.BUILDING_NAME)),o=e.scene.children.filter(s=>s.userData.building_accent==1&&s.userData.node_name&&s.userData.parent_node.includes($.BUILDING_NAME)),t=[];return a.forEach(s=>{t.push(s)}),o.forEach(s=>{t.push(s)}),new $(t,$.BUILDING_NAME,n)}buildLivingQuarters(e,n){const a=e.scene.children.find(s=>s.userData.node_name==F.BUILDING_NAME),o=e.scene.children.filter(s=>s.userData.parent_node&&s.userData.parent_node==F.BUILDING_NAME),t=[];return t.push(a),o.forEach(s=>{t.push(s)}),new F(t,F.BUILDING_NAME,n)}buildDistrict(e,n){const a=e.scene.children.find(s=>s.userData.node_name==k.BUILDING_NAME),o=e.scene.children.filter(s=>s.userData.parent_node&&s.userData.parent_node==k.BUILDING_NAME),t=[];return t.push(a),o.forEach(s=>{t.push(s)}),new k(t,k.BUILDING_NAME,n)}buildWorkshop(e,n){const a=e.scene.children.find(s=>s.userData.node_name==C.BUILDING_NAME),o=e.scene.children.filter(s=>s.userData.parent_node&&s.userData.parent_node==C.BUILDING_NAME),t=[];return t.push(a),o.forEach(s=>{t.push(s)}),new C(t,C.BUILDING_NAME,n)}buildOreProcessing(e,n){const a=e.scene.children.find(h=>h.userData.node_name==I.ORE_PROCESSING),o=e.scene.children.find(h=>h.userData.node_name==I.GRINDER_1),t=e.scene.children.find(h=>h.userData.node_name==I.GRINDER_2),s=e.scene.children.find(h=>h.userData.node_name==I.CRANE_BUILDING),l=e.scene.children.find(h=>h.userData.node_name==I.CRANE_GRIP),g=e.scene.children.filter(h=>h.userData.building_accent==1&&h.userData.parent_node==I.BUILDING_NAME),m=[a,o,t,s,l];return g.forEach(h=>{m.push(h)}),new I(m,I.BUILDING_NAME,n)}buildCommsTower(e,n){const a=e.scene.children.find(s=>s.userData.node_name==M.BASE_BUILDING_NAME),o=e.scene.children.find(s=>s.userData.node_name==M.ANTENNA_BUILDING_NAME),t=e.scene.children.find(s=>s.userData.node_name==M.LIGHT_BUILDING_NAME);return new M([a,o,t],M.BUILDING_NAME,n)}buildTerrain(e,n){const o=[e.scene.children.find(t=>t.userData.terrain==1)];return new ie(o,ie.BUILDING_NAME,n)}buildAtmosphereProcessor(e,n){const a=e.scene.children.find(s=>s.userData.node_name==O.BUILDING_NAME),o=e.scene.children.filter(s=>s.userData.building_accent==1&&s.userData.parent_node==O.BUILDING_NAME),t=[];return t.push(a),o.forEach(s=>{t.push(s)}),new O(t,O.BUILDING_NAME,n)}buildVehicles(e,n){const a=[];return e.scene.children.filter(s=>s.userData.node_name&&s.userData.node_name==re.VEHICLE_NAME).forEach(s=>{const l=[s];e.scene.children.filter(m=>m.userData.parent_vehicle&&m.userData.parent_vehicle==s.userData.vehicle_name).forEach(m=>{l.push(m)}),a.push(new re(l,s.userData.vehicle_name,n))}),e.scene.children.filter(s=>s.userData.node_name&&s.userData.node_name==le.VEHICLE_NAME).forEach(s=>{const l=[s];a.push(new le(l,s.userData.vehicle_name,n))}),a}}const Bt=(i,e)=>{const n=new b,a=new b,o=new b;return({maxX:t=1/0,minX:s=-1/0,maxY:l=1/0,minY:g=-1/0,maxZ:m=1/0,minZ:h=-1/0})=>{a.set(s,g,h),o.set(t,l,m),n.copy(e.target),e.target.clamp(a,o),n.sub(e.target),i.position.sub(n)}};class w{constructor(){}static getInstance(){return w.instance||(w.instance=new w),w.instance}setBluePrintEffectComposerPasses(e,n,a){this.blueprintRenderPass=new Ie(n.scene,a),e.addPass(this.blueprintRenderPass);const o=n.sceneElements.filter(s=>s.sceneElementType==v.BUILDING),t=[];o.forEach(s=>{s.parts.forEach(l=>{t.push(l.mesh)})}),this.blueprintOutlinePass=new we(new y(800,600),n.scene,a,t),this.blueprintOutlinePass.edgeStrength=2,this.blueprintOutlinePass.edgeGlow=.2,e.addPass(this.blueprintOutlinePass),this.bluePrintFilmPass=new ve(.25,.9,650,0),this.bluePrintFilmPass.renderToScreen=!0,e.addPass(this.bluePrintFilmPass),this.bluePrintGlitchPass=new qe,this.bluePrintGlitchPass.goWild=!0,this.bluePrintGlitchPass.enabled=!1,e.addPass(this.bluePrintGlitchPass)}setRegularEffectComposerPasses(e,n,a){this.regularRenderPass=new Ie(n.scene,a),e.addPass(this.regularRenderPass),this.regularOutlinePass=new we(new y(800,600),n.scene,a,[]),this.regularOutlinePass.edgeStrength=2,this.regularOutlinePass.edgeGlow=.2,e.addPass(this.regularOutlinePass),this.regularFilmPass=new ve(.1,.3,750,0),this.regularFilmPass.renderToScreen=!0,e.addPass(this.regularFilmPass)}outlineRegularElement(e){const n=[];e.parts.forEach(a=>{n.push(a.mesh)}),this.regularOutlinePass.selectedObjects=n}clearRegularElementOutlined(){this.regularOutlinePass.selectedObjects=[]}dispose(){this.bluePrintFilmPass.material.dispose(),this.regularFilmPass.material.dispose()}}class Nt{static transitionFromTopToMain(e){const n=e.camera,a=e.d;let o=new b().copy(n.position);const t=new b(a,a,a),s=n.rotation.clone(),l=new be;l.setFromEuler(s),n.position.copy(t),n.lookAt(e.getCurrentScene().scene.position);const g=n.rotation.clone(),m=new be;m.setFromEuler(g),n.position.copy(o),n.lookAt(e.getCurrentScene().scene.position);let h={z:n.zoom},u={z:2};const L=new P(o).to(t,2200).easing(R.Cubic.InOut).onUpdate(()=>{n.position.copy(o),n.updateProjectionMatrix()}).onStart(()=>{V.start()}),V=new P(l).to(m,2200).easing(R.Cubic.InOut).onUpdate(()=>{n.rotation.setFromQuaternion(l),n.updateProjectionMatrix()}),K=new P(h).easing(R.Quadratic.Out).to(u,1100).onUpdate(()=>{n.zoom=h.z,n.updateProjectionMatrix()}).onComplete(()=>{e.createCameraControls(),e.onTransitionToRegularFinished&&e.onTransitionToRegularFinished()});V.chain(K),L.start()}}const xe=class{constructor(i,e,n){this.loader=new Ye,this.clock=new Xe,this.currentDrawMode=_.BLUEPRINT,this.blueprintScene=new ye,this.regularScene=new ye,this.nearPlane=-10,this.farPlane=1e3,this.d=10,this.raycaster=new Ze,this.pointer=new y,this.currentIntersectedElement=null,this.currentSelectedElement=null,this.createCameraControls=()=>{this.cameraControls=new Ke(this.camera,this.renderer.domElement),this.cameraControls.enableRotate=!1,this.cameraControls.enableZoom=!1,this.cameraControls.maxZoom=4.5,this.cameraControls.minZoom=2,this.cameraControls.autoRotate=!1,this.cameraControls.touches.ONE=Je.PAN,this.cameraControls.mouseButtons.LEFT=et.PAN;const o=Bt(this.camera,this.cameraControls);this.cameraControls.addEventListener("change",t=>{const s=9;o({minX:-s,maxX:s,minZ:-s,maxZ:s,minY:-s,maxY:s})})},this.buildingConstructor=new bt,this.width=i,this.height=e,this.renderer=new tt({alpha:!0}),this.renderer.setPixelRatio(n),this.renderer.setClearColor(1317429),this.renderer.shadowMap.enabled=!0,this.renderer.setSize(i,e);const a=i/e;this.camera=new st(this.d*-a,this.d*a,this.d,this.d*-1,this.nearPlane,this.farPlane),this.camera.position.set(0,this.d,0),this.camera.lookAt(new b)}async load(){const i=await this.loader.loadAsync(xe.SCENE_MODEL_NAME),e=this.buildingConstructor.construct(i,_.BLUEPRINT),n=this.buildingConstructor.construct(i,_.REGULAR);this.blueprintScene.assignElementsToScene(e),this.regularScene.assignElementsToScene(n),this.blueprintScene.buildLights(this.d,this.nearPlane,this.farPlane),this.regularScene.addFog(),this.regularScene.buildLights(this.d,this.nearPlane,this.farPlane),this.bluePrintEffectComposer=new Be(this.renderer),w.getInstance().setBluePrintEffectComposerPasses(this.bluePrintEffectComposer,this.blueprintScene,this.camera),this.regularEffectComposer=new Be(this.renderer),w.getInstance().setRegularEffectComposerPasses(this.regularEffectComposer,this.regularScene,this.camera)}focusTarget(i){this.cameraControls.enabled=!1,w.getInstance().outlineRegularElement(i);let e=new b().copy(this.camera.position),n=new b;const a=i.boundingBox.getCenter(n);let o=new b(1,0,-1);const t=this.width/this.height;t<1&&(o=new b(1.5,0,1.5)),a.add(o),a.y=0,a.add(new b(this.d,this.d,this.d));const s=new P(e).to(a,1100).easing(R.Cubic.InOut).onUpdate(u=>{this.camera.position.copy(u),this.cameraControls.target.copy(this.camera.position.clone().sub(new b(this.d,this.d,this.d))),this.cameraControls.update()}),l=t<1?3:4,g={zoom:this.camera.zoom},m={zoom:l};t<1&&(m.zoom=3);const h=new P(g).to(m,380).easing(R.Quadratic.InOut).onUpdate(u=>{this.camera.zoom=u.zoom}).onComplete(()=>{this.onBuildingFocused&&(this.cameraControls.enabled=!0,this.currentSelectedElement=i,this.onBuildingFocused(i))});s.chain(h),s.start()}unfocus(){const i={zoom:this.camera.zoom},e={zoom:2};this.currentSelectedElement=null,w.getInstance().clearRegularElementOutlined(),new P(i).to(e,380).easing(R.Quadratic.InOut).onUpdate(n=>{this.camera.zoom=n.zoom}).start()}checkSelectedObject(){if(this.currentDrawMode==_.BLUEPRINT||!this.cameraControls||!this.cameraControls.enabled)return;const i=[];this.regularScene.sceneElements.filter(e=>e.sceneElementType==v.BUILDING).forEach(e=>{e.parts.forEach(n=>{const a=new b;this.raycaster.ray.intersectBox(n.boundingBox,a)&&i.push(e)})}),i.length?this.currentIntersectedElement=i[0]:this.currentIntersectedElement=null}isPointerOverElement(){return this.currentIntersectedElement!=null}attemptTapOrClick(i,e){return this.currentDrawMode==_.BLUEPRINT||!this.cameraControls||!this.cameraControls.enabled?null:(this.updatePointerPosition(i,e),this.checkSelectedObject(),this.currentIntersectedElement!=null?(this.focusTarget(this.currentIntersectedElement),this.currentIntersectedElement):null)}updatePointerPosition(i,e){this.pointer.x=i,this.pointer.y=e,this.raycaster.setFromCamera(this.pointer,this.camera)}update(){this.checkSelectedObject(),this.updateCamera();const i=this.clock.getDelta();this.cameraControls!=null&&this.cameraControls.update(),this.blueprintScene.update(i),this.regularScene.update(i)}render(){const i=this.clock.getDelta();this.currentDrawMode==_.REGULAR?this.regularEffectComposer.render(i):this.bluePrintEffectComposer.render(i)}getCurrentScene(){return this.currentDrawMode==_.BLUEPRINT?this.blueprintScene:this.regularScene}transition(){w.getInstance().bluePrintGlitchPass.enabled=!0,setTimeout(()=>{this.currentDrawMode=_.REGULAR,w.getInstance().bluePrintGlitchPass.enabled=!1,w.getInstance().blueprintOutlinePass.enabled=!1,w.getInstance().bluePrintFilmPass.enabled=!1,w.getInstance().blueprintRenderPass.enabled=!1,this.blueprintScene.dispose(),Nt.transitionFromTopToMain(this)},120)}updateCamera(){const i=this.width/this.height;this.camera.left=this.d*-i,this.camera.right=this.d*i,this.camera.updateProjectionMatrix()}resize(i,e){this.width=i,this.height=e,this.updateCamera(),this.renderer.setSize(i,e),this.bluePrintEffectComposer.setSize(i,e),this.regularEffectComposer.setSize(i,e)}dispose(){this.cameraControls!=null&&this.cameraControls.dispose(),this.renderer.dispose(),this.blueprintScene.dispose(),this.regularScene.dispose(),w.getInstance().dispose()}};let Oe=xe;Oe.SCENE_MODEL_NAME="./models/hadleys.glb";const W=i=>(De("data-v-79005453"),i=i(),Me(),i),Dt={class:"intro-overlay"},Mt=W(()=>r("div",{class:"wy-logo"},null,-1)),Lt=W(()=>r("h2",null,"Welcome to LV\u2011470",-1)),Pt=W(()=>r("p",null," Weyland Yutani welcomes you to your new home. A small yet thriving community awaits you at Mutta Station. ",-1)),yt=W(()=>r("p",null,[B(" You have assigned a living unit at Mutta Station as a reward for your hard years working as an "),r("span",{class:"highlight"},"[Operator]"),B(" at "),r("span",{class:"highlight"},"[Fiorina Fury 223]"),B(". ")],-1)),At=W(()=>r("p",null,[r("strong",null,"Get familiar with your environments:")],-1)),Ut=W(()=>r("p",null," Use your mouse or finger to move around and explore the settlement. You can tap on some of the buildings to know more about them. ",-1)),Ct=["onClick","disabled"],Gt=X({emits:["explore"],setup(i,{expose:e,emit:n}){const a=E(null),o=E(null),t=E(!0),s=E(!0),l=E("loading..."),g=()=>{t.value=!1,l.value="explore settlement",S.to(o.value,{autoAlpha:0,duration:.85})},m=()=>{s.value=!1,S.to(a.value,{ease:Le.easeIn,autoAlpha:0,scale:.9,duration:.64,onComplete:()=>{setTimeout(()=>{n("explore")},340)}})},h=nt(()=>s.value&&!t.value);return e({removeLoadingCover:g}),(u,L)=>(U(),G("div",Dt,[r("div",{class:"loading-cover",ref_key:"loadingCover",ref:o},null,512),r("div",{class:"intro container",ref_key:"welcomePanel",ref:a},[Mt,Lt,Pt,yt,At,Ut,r("button",{onClick:at(m,["prevent"]),class:"button orange fixed-width",disabled:!it(h)},Ne(l.value),9,Ct)],512)]))}});var Tt=x(Gt,[["__scopeId","data-v-79005453"]]);const Rt={class:"modal-dialog-main"},St=X({setup(i,{expose:e}){const n=E(null),a=E(null);let o=null;const t=()=>{o.play()},s=()=>{o.reverse()};return te(()=>{o=S.timeline({paused:!0}).to(n.value,{autoAlpha:1,duration:.2,onComplete:()=>{S.to(a.value,{autoAlpha:1,ease:ot.easeInOut,duration:.3})}})}),e({showModal:t,hideModal:s}),(l,g)=>(U(),G("div",{class:"modal-overlay",ref_key:"modalOverlay",ref:n},[r("div",{class:"modal-dialog",ref_key:"modalDialog",ref:a},[r("div",Rt,[rt(l.$slots,"default",{},void 0,!0)]),r("div",{class:"modal-dialog-footer"},[r("button",{class:"button orange",onClick:s},"OK")])],512)],512))}});var ke=x(St,[["__scopeId","data-v-08065592"]]);const j=i=>(De("data-v-62c8c22c"),i=i(),Me(),i),xt=j(()=>r("i",{class:"icon user"},null,-1)),Ot=[xt],kt=j(()=>r("i",{class:"icon help"},null,-1)),Ft=[kt],zt=j(()=>r("a",{href:"https://github.com/aarcoraci/lv470-aliens-fansite",class:"navigation-panel-button",target:"_blank",rel:"noopener noreferrer"},[r("i",{class:"icon github"})],-1)),Ht=j(()=>r("div",{class:"modal-content"},[r("h4",null,"About Me"),r("p",null," I'm Angel, a software engineer with great passion for visual and interactive projects. I've been programming since I was a teen while I was in high school. "),r("p",null," This project is not only a kind of portfolio entry but also a good practice for me to take a look on the technologies I used to built it. "),r("p",null,[B(" I'm part of "),r("a",{href:"https://on3tech.com/",target:"_blank",rel:"noopener noreferrer"},"On 3 Technologies"),B(" and we love to do projects like this. If you find this interesting or if you are looking to have something developed let me know: "),r("a",{href:"mailto:angel@on3tech.com",target:"_blank"},"angel@on3tech.com"),B(". ")])],-1)),Wt=j(()=>r("div",{class:"modal-content"},[r("h4",null,"About This Site"),r("p",null," The site is the result of a personal challenge: I wanted to take a few technologies I like plus learn a few others and undust some dormant skills and try to put something together. "),r("p",null," Regarding the project, it's an Aliens fanpage heavily inspired by the James Cameron movie. "),r("h5",null,"Technologies used"),r("div",{class:"technologies-showcase"},[r("div",{class:"tech-item"},[r("div",{class:"logo three"}),B(" three.js ")]),r("div",{class:"tech-item"},[r("div",{class:"logo ts"}),B(" typescript ")]),r("div",{class:"tech-item"},[r("div",{class:"logo vue"}),B(" vue ")]),r("div",{class:"tech-item"},[r("div",{class:"logo blender"}),B(" blender ")]),r("div",{class:"tech-item"},[r("div",{class:"logo gsap"}),B(" gsap ")])])],-1)),$t=X({setup(i,{expose:e}){const n=E(null),a=E(null),o=E(null);let t=null;const s=()=>{a.value.showModal()},l=()=>{o.value.showModal()},g=()=>{t.play()},m=()=>{t.reverse()};return te(()=>{S.set(n.value,{autoAlpha:0,top:"-5%"}),t=S.timeline({paused:!0}).to(n.value,{duration:.29,ease:Le.easeOut,autoAlpha:1,top:"0%"})}),e({showPanel:g,hidePanel:m}),(h,u)=>(U(),G(lt,null,[r("div",{class:"navigation-panel",ref_key:"navigationPanel",ref:n},[r("button",{class:"navigation-panel-button",onClick:s},Ot),r("button",{class:"navigation-panel-button",onClick:l},Ft),zt],512),q(ke,{ref_key:"userModal",ref:a},{default:Pe(()=>[Ht]),_:1},512),q(ke,{ref_key:"aboutModal",ref:o},{default:Pe(()=>[Wt]),_:1},512)],64))}});var jt=x($t,[["__scopeId","data-v-62c8c22c"]]);const Vt=[{name:"Atmosphere Processor",sceneElementName:O.BUILDING_NAME,text:`This large building is an automated reactor capable of converting 
    an unbreathable, toxic or otherwise inhospitable atmosphere into one 
    suitable for humans.
    <br />
    <br />
    The structure is built in a way to ensure the reactor will always be safe. Not even a ship
    crash could compromise it.`},{name:"Operations",sceneElementName:z.BUILDING_NAME,text:`This is the main headquarter from where our most capable personal
    oversees everything that happens on the settlement.
    <br />
    <br />
    No task is too big or too small for our officers and scientists and when in doubt
    ask: you will get a fast and reliable response.
    `},{name:"Communication Tower",sceneElementName:M.BUILDING_NAME,text:`Every settlement counts with a communication tower. This allows the people 
    of the settlement to get important broadcasts and information about incoming shipments or cargo.
    <br />
    <br />
    In special cases can be used to manually control ships or satellites in orbit though
     this is likely never to be needed.
    `},{name:"Community District",sceneElementName:k.BUILDING_NAME,text:`The heart of the colony lies on the Community District. A place to find rest in this
    garden in the stars.
    <br />
    The district counts with several shops and training facilities for those who want to embark on
    a new hobby.
    <br />
    <br />
    We recommend the bakery on the shop 8-C. Their bagels can last weeks without going bad!.
    `},{name:"Ore Processing",sceneElementName:I.BUILDING_NAME,text:`The main activity of the settlement revolves around mining hard to find ores in the rest of the system.
    <br />
    <br />
    Workers assigned to this facility are in charge of gathering, refining, purifying and packing minerals for later
    use or shipment to the rest of the colonies.
    `},{name:"Living Quarters",sceneElementName:F.BUILDING_NAME,text:`All personal and officers have their living units assigned on this building.
    High tier members quarters are located on the west wing while miners and workers on 
    north.
    <br />
    <br />
    The building offer some comfort facilities and it's common to see the worker's families
    gathering around them. Just don't leave your kids on the upper decks !.
    `},{name:"The Workshop",sceneElementName:C.BUILDING_NAME,text:`The Workshop is not only used to keep the colony's vehicles fine tuned but also any 
    device or facility that may require maintenance or fixing.
    <br />
    <br />
    Workers assigned to this building have the task of overseeing our land vehicles which can travel
    long distances and have their own life support system. A Family of 4 could take a trip around the 
    planet if desired!
    `}];const Qt={class:"main"},qt={class:"top"},Yt=["innerHTML"],Xt=X({setup(i){let e,n;const a=E(!0),o=E(null),t=E(null),s=E(null),l=E(null);let g=!1,m=new y,h=new y,u=0;const L=E({name:"",text:"",sceneElementName:""}),V=async f=>{e=new Oe(window.innerWidth,window.innerHeight,window.devicePixelRatio),await e.load(),f.appendChild(e.renderer.domElement),o.value.removeLoadingCover(),e.onBuildingFocused=Fe,e.onTransitionToRegularFinished=K},K=()=>{t.value.showPanel()},Fe=f=>{s.value.classList.remove("selecting"),L.value=Vt.find(D=>D.sceneElementName==f.name),he(!0)},ce=()=>{e.resize(window.innerWidth,window.innerHeight)},ue=()=>{dt(),n=requestAnimationFrame(ue),e.update(),e.render()},he=f=>{f?l.value.classList.add("visible"):l.value.classList.remove("visible")},de=f=>{g=!0;const D=f.clientX/window.innerWidth*2-1,A=-(f.clientY/window.innerHeight)*2+1;m=new y(D,A)},pe=f=>{const D=f.clientX/window.innerWidth*2-1,A=-(f.clientY/window.innerHeight)*2+1;e.updatePointerPosition(D,A),g?(h=new y(D,A),u=h.distanceTo(m),s.value.classList.add("dragging"),u>=.1&&e.currentSelectedElement!=null&&Q()):e.currentSelectedElement==null&&(e.isPointerOverElement()?s.value.classList.add("selecting"):s.value.classList.remove("selecting"))},me=f=>{e.currentSelectedElement!=null&&Q()},Q=()=>{e.unfocus(),he(!1)},ge=f=>{const D=f.clientX/window.innerWidth*2-1,A=-(f.clientY/window.innerHeight)*2+1;if(h=new y(D,A),u=h.distanceTo(m),s.value.classList.remove("dragging"),g=!1,!(u>=.02)){if(e.currentSelectedElement!=null){Q();return}e.attemptTapOrClick(D,A)}};te(async()=>{const f=document.querySelector("#main-scene");await V(f),window.addEventListener("resize",ce),s.value.addEventListener("mousemove",pe),s.value.addEventListener("touchmove",me),s.value.addEventListener("mousedown",de),s.value.addEventListener("mouseup",ge),ue()}),ct(()=>{cancelAnimationFrame(n),e.dispose(),window.removeEventListener("resize",ce),s.value.removeEventListener("mousemove",pe),s.value.removeEventListener("touchmove",me),s.value.removeEventListener("mousedown",de),s.value.removeEventListener("mouseup",ge)});const ze=()=>{a.value=!1,e.transition()};return(f,D)=>(U(),G("div",Qt,[a.value?(U(),ut(Tt,{key:0,onExplore:ze,ref_key:"introOverlay",ref:o},null,512)):ht("",!0),r("div",{div:"",id:"main-scene",class:"main-scene",ref_key:"mainScene",ref:s},null,512),q(jt,{ref_key:"navigationPanel",ref:t},null,512),r("div",{class:"side-panel",ref_key:"sidePanel",ref:l},[r("div",qt,[r("h3",null,Ne(L.value.name),1),r("p",{innerHTML:L.value.text},null,8,Yt)]),r("div",{class:"bottom"},[r("button",{onClick:Q,class:"button orange"},"close")])],512)]))}});var Zt=x(Xt,[["__scopeId","data-v-07a4bd02"]]);const Kt={},Jt=r("h3",null,"About",-1),es=[Jt];function ts(i,e){return U(),G("div",null,es)}var ss=x(Kt,[["render",ts]]);const ns=[{path:"/",name:"Home",component:Zt},{path:"/about",name:"About",component:ss}],as=pt({history:mt("/lv470-aliens-fansite/"),routes:ns});gt(It).use(as).mount("#app");
